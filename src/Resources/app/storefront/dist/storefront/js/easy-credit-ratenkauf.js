(window.webpackJsonp=window.webpackJsonp||[]).push([["easy-credit-ratenkauf"],{"3NPC":function(e,t,n){"use strict";n.r(t);var r=n("8XvI"),o=n("FGIj"),i=n("PC24"),a=n.n(i);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"prepareWidgetData",(function(e){if(!e||e.wsMessages.messages.length>0)return Promise.reject();var t={number_of_installments:e.anzahlRaten,amount:r._formatAmount(e.betragRate),currency_symbol:r.opts.currencySymbol,suffix:r.opts.suffix,link_text:r.opts.linkText};return t.installmentTemplate=r._template(r.opts.installmentTemplate,t),Promise.resolve(t)})),f(this,"renderWidget",(function(e){var t=r._template(r.opts.widgetTemplate,e),n=document.createElement("div");n.innerHTML=t,r.element.parentNode.insertBefore(n,r.element.nextSibling),r.addStyles(),n.querySelector("a").addEventListener("click",r.showModal)})),f(this,"addStyles",(function(){var e=document.createElement("style");e.innerHTML="\n            .easycredit-widget {\n                display: block;\n                color: #000;\n                font-size: 13px;\n                padding: 10px;\n                display: inline-block;\n                background-color:#fff;\n                background-image: url(https://static.easycredit.de/content/image/logo/ratenkauf_42_55.png);\n                background-size: 55px 42px;\n                background-repeat: no-repeat;\n                padding-left: 60px;\n                background-position-y: center;\n                min-width: 200px;\n            }\n            .easycredit-widget .easycredit-rate, \n            .easycredit-widget .easycredit-suffix {\n                font-weight: 700;\n            }\n            .easycredit-widget .easycredit-link {\n                cursor: pointer;\n            }\n            ";var t=document.querySelector("script");t.parentNode.insertBefore(e,t)})),f(this,"showModal",(function(){var e=r._getModalContent(r._getIframeUri(r.opts));r.opts.modal(e)})),this.element=t;var o=this.getDefaults();if(this.opts=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},o,{},n),this.validate()){var i=this._getApiUri(this.opts);this.getMinimumInstallment(i).then(this.prepareWidgetData).then(this.renderWidget).catch((function(e){return console.debug(e)}))}}var t,n,r;return t=e,(n=[{key:"validate",value:function(){var e=this.opts;if(isNaN(e.amount)||e.amount<200||e.amount>1e4){if(e.debug)throw new Error(e.amount+" is not within allowed range");return!1}if(null==e.webshopId||""==e.webshopId)throw new Error("webshopId must be set for easycredit widget");return!0}},{key:"getMinimumInstallment",value:function(e){var t={headers:new Headers({"content-type":"application/json; charset=utf-8"})};return a()(e,t).then((function(e){return e.json()}))}},{key:"getDefaults",value:function(){return{hostname:"//ratenkauf.easycredit.de",endpoint:"/ratenkauf-ws/rest/v1/modellrechnung/guenstigsterRatenplan",iframeSrc:"/widget/app/#/ratenwunsch",modal:null,webshopId:null,amount:null,debug:!1,currencySymbol:"&euro;",installmentTemplate:"%amount% %currency_symbol% / Monat",widgetTemplate:['<div class="easycredit-widget">','<span class="easycredit-suffix">%suffix% </span>','<span class="easycredit-rate">%installmentTemplate%</span>',"<br />",'<a class="easycredit-link">%link_text%</a>',"</div>"].join("\n"),suffix:"Finanzieren ab",linkText:"mehr Infos zum Ratenkauf"}}},{key:"_getApiUri",value:function(e){return[e.hostname+e.endpoint,this.param({webshopId:e.webshopId,finanzierungsbetrag:e.amount})].join("?")}},{key:"param",value:function(e){for(var t=new URLSearchParams,n=0,r=Object.entries(e);n<r.length;n++){var o=u(r[n],2),i=o[0],a=o[1];t.set(i,String(a))}return t.toString()}},{key:"_getIframeUri",value:function(e){return[e.hostname+e.iframeSrc,this.param({shopKennung:e.webshopId,bestellwert:e.amount})].join("?")}},{key:"_formatAmount",value:function(e){return Number(Math.round(e+"e2")+"e-2").toFixed(2).replace(".",",")}},{key:"_template",value:function(e,t){return e.replace(/%(\w*)%/g,(function(e,n){return t.hasOwnProperty(n)?t[n]:""}))}},{key:"_getModalContent",value:function(e){return'<iframe class="easycredit-modal" src="'+e+'"></iframe>'}}])&&l(t.prototype,n),r&&l(t,r),e}(),d=n("2Jwc");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var w=function(e){function t(){return m(this,t),h(this,g(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"init",value:function(){this.initWidget()}},{key:"initWidget",value:function(){var e=this.getMeta("widget-selector");if(null!==e&&null!==this.getMeta("api-key")){this.el=document.querySelector(e);var t=this.getMeta("amount");if(null===t||isNaN(t)){var n=this.el.parentNode;t=n.querySelector("[itemprop=price]")?n.querySelector("[itemprop=price]").content:null}null===t||isNaN(t)||new p(this.el,{webshopId:this.getMeta("api-key"),amount:t,modal:this.createModal})}}},{key:"getMeta",value:function(e){var t=document.querySelector("meta[name=easycredit-"+e+"]");return null===t?null:t.content}},{key:"createModal",value:function(e){var t=new d.a(e);t.open(),t.getModal().querySelector(".modal-dialog").classList.add("modal-lg")}}])&&b(n.prototype,r),o&&b(n,o),t}(o.a),k=window.PluginManager;k.register("EasyCreditRatenkaufCheckout",r.a,".is-ctl-checkout.is-act-confirmpage"),k.register("EasyCreditRatenkaufWidget",w,"body")},"8XvI":function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"a",(function(){return s}));var s=function(t){function n(){return o(this,n),a(this,u(n).apply(this,arguments))}var r,s,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(n,t),r=n,(s=[{key:"init",value:function(){var t=function(){e("#easycredit-payment-form").closest(".payment-method").find(e(this)).length>0?e("#easycredit-agreement").attr("required","required"):e("#easycredit-agreement").removeAttr("required")};e("input[type=radio][name=paymentMethodId]:checked").each(t),e("input[type=radio][name=paymentMethodId]").change(t),e("#easycredit-recalculate").click((function(){return e("#confirmPaymentForm").submit(),!1})),e("easycredit-components-checkout").submit((function(){return e("#changePaymentForm").append('<input type="hidden" name="easycredit-submit" value="1" />').submit(),!1}))}}])&&i(r.prototype,s),l&&i(r,l),n}(n("FGIj").a)}).call(this,n("UoTJ"))},PC24:function(e,t,n){var r,o,i;o=[t,e],void 0===(i="function"==typeof(r=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function o(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}function a(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=e,u=t.timeout||n.timeout,c=t.jsonpCallback||n.jsonpCallback,s=void 0;return new Promise((function(n,l){var f=t.jsonpCallbackFunction||r(),p=c+"_"+f;window[f]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),s&&clearTimeout(s),i(p),o(f)},a+=-1===a.indexOf("?")?"?":"&";var d=document.createElement("script");d.setAttribute("src",""+a+c+"="+f),t.charset&&d.setAttribute("charset",t.charset),d.id=p,document.getElementsByTagName("head")[0].appendChild(d),s=setTimeout((function(){l(new Error("JSONP request to "+e+" timed out")),o(f),i(p),window[f]=function(){o(f)}}),u),d.onerror=function(){l(new Error("JSONP request to "+e+" failed")),o(f),i(p),s&&clearTimeout(s)}}))}t.exports=a})?r.apply(t,o):r)||(e.exports=i)}},[["3NPC","runtime","vendor-node","vendor-shared"]]]);